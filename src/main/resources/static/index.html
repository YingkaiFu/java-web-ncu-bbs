<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>首页</title>
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/common.css">
        <style>
            #index-right {
                margin-left: 50px;
            }
        </style>
        <script src="js/jquery-3.3.1.js"></script>
    </head>
    <body>
        <!-- 渲染顶部导航栏 -->
        <script src="js/jquery-3.3.1.js"></script>
        <script src="js/header.js"></script>

        <!-- 主题内容 -->
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <!-- 左侧部分 -->
                        <div class="col-lg-6">
                            <!-- 帖子区域 -->
                            <div class="row">
                                <!-- 导航 -->
                                <ul class="nav nav-tabs" role="tablist">
                                    <li role="presentation" class="active">
                                        <a href="#post-hot" aria-controls="home" role="tab" data-toggle="tab">最热帖子</a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#post-latest" aria-controls="home" role="tab" data-toggle="tab">最新帖子</a>
                                    </li>
                                </ul>
                                <!--- 帖子列表 -->
                                <div class="tab-content">
                                    <div class="list-group tab-pane active" id="post-hot" role="tabpanel">
                                        <a href="post.html?postId=1" class="list-group-item">
                                            <h3 class="list-group-item-heading"><span>【升学就业】</span>2018 年终盘点：“年度爆款”的区块链真的结束了吗？</h3>
                                            <table class="table table-condensed">
                                                <tbody>
                                                    <tr>
                                                        <td><span class="glyphicon glyphicon-user"></span><span class="bbs-post-author">罗伟</span></td>
                                                        <td><span class="glyphicon glyphicon-time"></span><span>2018年12月25日</span></td>
                                                        <td><span class="glyphicon glyphicon-eye-open"></span><span>10</span></td>
                                                        <td><span class="glyphicon glyphicon-comment"></span><span>10</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <p class="list-group-item-text">年终盘点之区块链：拨霾见日，大路朝天</p>
                                        </a>
                                    </div>

                                    <!-- 最新帖子 -->
                                    <div class="list-group tab-pane" id="post-latest" role="tabpanel">
                                        <a href="post.html?postId=6" class="list-group-item">
                                            <h3 class="list-group-item-heading"><span>【升学就业】</span>2018 年终盘点：“年度爆款”的区块链真的结束了吗？</h3>
                                            <table class="table table-condensed">
                                                <tbody>
                                                    <tr>
                                                        <td><span class="glyphicon glyphicon-user"></span><span class="bbs-post-author">罗伟</span></td>
                                                        <td><span class="glyphicon glyphicon-time"></span><span>2018年12月25日</span></td>
                                                        <td><span class="glyphicon glyphicon-eye-open"></span><span>10</span></td>
                                                        <td><span class="glyphicon glyphicon-comment"></span><span>10</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <p class="list-group-item-text">年终盘点之区块链：拨霾见日，大路朝天</p>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- 问答区域 -->
                            <div class="row">
                                <ul class="nav nav-tabs" role="tablist">
                                    <li role="presentation" class="active">
                                        <a href="#question-hot" aria-controls="home" role="tab" data-toggle="tab">最热问答</a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#question-latest"  aria-controls="home" role="tab" data-toggle="tab">最新问答</a>
                                    </li>
                                </ul>
                                <!-- 问答列表 -->
                                <div class="tab-content">
                                    <div class="list-group tab-pane active" id="question-hot" role="tabpanel">
                                        <!--a href="question.html?questionId=1" class="list-group-item"-->
                                        <a href="question.html?quesionId=1" class="list-group-item">
                                            <h3 class="list-group-item-heading">2018 年终盘点：“年度爆款”的区块链真的结束了吗？</h3>
                                            <table class="table table-condensed">
                                                <tbody>
                                                    <tr>
                                                        <td><span class="glyphicon glyphicon-user"></span><span>罗伟</span></td>
                                                        <td><span class="glyphicon glyphicon-time"></span><span>2018年12月25日</span></td>
                                                        <td><span class="glyphicon glyphicon-eye-open"></span><span>10</span></td>
                                                        <td><span class="glyphicon glyphicon-comment"></span><span>10</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <p class="list-group-item-text">年终盘点之区块链：拨霾见日，大路朝天</p>
                                        </a>
                                    </div>
                                    <div class="list-group tab-pane" id="question-latest" role="tabpanel">
                                        <!--a href="question.html?questionId=1" class="list-group-item"-->
                                        <a href="question.html?quesionId=1" class="list-group-item">
                                            <h3 class="list-group-item-heading">2019 年终盘点：“年度爆款”的区块链真的结束了吗？</h3>
                                            <table class="table table-condensed">
                                                <tbody>
                                                    <tr>
                                                        <td><span class="glyphicon glyphicon-user"></span><span>罗伟</span></td>
                                                        <td><span class="glyphicon glyphicon-time"></span><span>2018年12月25日</span></td>
                                                        <td><span class="glyphicon glyphicon-eye-open"></span><span>10</span></td>
                                                        <td><span class="glyphicon glyphicon-comment"></span><span>10</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <p class="list-group-item-text">年终盘点之区块链：拨霾见日，大路朝天</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 右侧部分 -->
                        <div class="col-lg-5" id="index-right">
                            <!-- 动弹区域 -->
                            <div class="row">
                                <ul class="nav nav-tabs">
                                    <li role="presentation" class="active"><a href="tweets.html">动弹一下</a></li>
                                </ul>
                                <div class="list-group" id="tweetsList">
                                    <div class="list-group-item">
                                        <div class="row">
                                            <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                                <a href="https://my.oschina.net/u/3417788">
                                                    <img src="https://static.oschina.net/uploads/user/1708/3417788_50.jpeg" alt="" srcset="" class="img-circle">
                                                    <span>卖报的小画家</span>
                                                </a>
                                            </div>
                                            <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
                                                <p>圣诞节是耶稣的诞辰，同时也是耶稣他妈玛利亚的受难日，在这一天不能说圣诞快乐，要说圣诞安康，这一天也被西方的安道尔、巴巴多斯岛等地区称为西方的寒食节，在这一天要吃饺子，取圣母玛利亚“教子”之意，时刻提醒我们教育后代的重要性。​</p>
                                                <img src="https://oscimg.oschina.net/oscnet/up-mb48a3fu4oi9mhs6r55gx1hzw5lm11rk!/sq/200">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 活动区域 -->
                            <div class="row">
                                <ul class="nav nav-tabs">
                                    <li role="presentation" class="active"><a href="activities.html">活动专区</a></li>
                                </ul>
                                <div class="list-group" id="activityList">
                                    <a href="#" class="list-group-item">
                                        <h4 class="list-group-item-heading">List group item heading</h4>
                                        <div>
                                            <span>2019.01.12</span>
                                            <span>天健九食堂门口</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
            </div>
        </div>

        <!-- 渲染底部版权声明 -->
        <script src="js/footer.js"></script>
        <script src="js/bootstrap.js"></script>
        <script>
            $(function () {
                // var user = JSON.parse(localStorage.getItem("user"));
                // var accountId = user.userAccountId;
                $.ajax({
                    type: "get",
                    url: "/post/getHostPosts",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        console.log(response);
                        if (response.code == 1) {
                            var post = response.data.posts;
                            var html="";
                            for (var i = 0; i < post.length; i++) {
                                htmlDiv = "<a href='post.html?themeId="+ post[i].postThemeId +"' class='list-group-item'>" +
                                    "<h3 class='list-group-item-heading'><span>【"+ post[i].setionName+ "】</span>"+ post[i].themeName +"</h3>" +
                                    "<table class='table table-condensed'>" +
                                    "<tbody>" +
                                    "<tr>" +
                                    "<td><span class='glyphicon glyphicon-user'></span><span class='bbs-post-author'>"+post[i].nickName+"</span></td>" +
                                    "<td><span class='glyphicon glyphicon-time'></span><span>"+post[i].createTime+"</span></td>" +
                                    "<td><span class='glyphicon glyphicon-eye-open'></span><span>"+ post[i].clickNum + "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-comment'></span><span>"+post[i].replyNum+"</span></td>" +
                                    "</tr>" +
                                    "</tbody>" +
                                    "</table>" +
                                    "<p class='list-group-item-text'>"+ post[i].content +"</p>\n" +
                                    "</a>";
                                html += htmlDiv;
                            }
                            $("#post-hot").html(html);
                        } else {
                            alert(response.msg);
                        }
                    }
                })
                $.ajax({
                    type: "get",
                    url: "/post/getNewestPosts",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        console.log(response);
                        if (response.code == 1) {
                            var post = response.data.posts;
                            var html="";
                            for (var i = 0; i < post.length; i++) {
                                htmlDiv = "<a href='post.html?themeId="+ post[i].postThemeId +"' class='list-group-item'>" +
                                    "<h3 class='list-group-item-heading'><span>【"+ post[i].setionName+ "】</span>"+ post[i].themeName +"</h3>" +
                                    "<table class='table table-condensed'>" +
                                    "<tbody>" +
                                    "<tr>" +
                                    "<td><span class='glyphicon glyphicon-user'></span><span class='bbs-post-author'>"+post[i].nickName+"</span></td>" +
                                    "<td><span class='glyphicon glyphicon-time'></span><span>"+post[i].createTime+"</span></td>" +
                                    "<td><span class='glyphicon glyphicon-eye-open'></span><span>"+ post[i].clickNum + "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-comment'></span><span>"+post[i].replyNum+"</span></td>" +
                                    "</tr>" +
                                    "</tbody>" +
                                    "</table>" +
                                    "<p class='list-group-item-text'>"+ post[i].content +"</p>\n" +
                                    "</a>";
                                html += htmlDiv;
                            }
                            $("#post-latest").html(html);
                        } else {
                            alert(response.msg);
                        }
                    }
                })
                $.ajax({
                    type: "get",
                    url: "/activity/latest",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        console.log(response);
                        if (response.code == 1) {
                            var activity = response.data.activities;
                            var html="";
                            for (var i = 0; i < activity.length; i++) {
                                htmlDiv = " <a href='#' class='list-group-item'>" +
                                    "<h4 class='list-group-item-heading'>"+ activity[i].description+"</h4>" +
                                    "<div>" +
                                    "<span>"+ activity[i].activityStartTime +"</span>" +
                                    "<span>"+ activity[i].locale+"</span>" +
                                    "</div>" +
                                    "</a>";
                                html += htmlDiv;
                            }
                            $("#activityList").html(html);
                        } else {
                            alert(response.msg);
                        }
                    }
                })
                $.ajax({
                    type: "get",
                    url: "/question/latest",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        console.log(response);
                        if (response.code == 1) {
                            var question = response.data.questions;
                            var html = "";
                            for (var i = 0; i < question.length; i++) {
                                htmlDiv = "<a href='question.html?quesionId=1' class='list-group-item'>" +
                                    "<h3 class='list-group-item-heading'>" + question[i].title + "</h3>" +
                                    "<table class='table table-condensed'>" +
                                    "<tbody>" +
                                    "<tr>" +
                                    "<td><span class='glyphicon glyphicon-user'></span><span>" + question[i].author.nickname +
                                    "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-time'></span><span>" + question[i].createTime + "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-eye-open'></span><span>" + question[i].clickNum + "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-comment'></span><span>" + question[i].answerNum + "</span></td>" +
                                    "</tr>" +
                                    "</tbody>" +
                                    "</table>" +
                                    "<p class='list-group-item-text'>" + question[i].description + "</p>" +
                                    "</a>";
                                html += htmlDiv;
                            }
                            $("#question-latest").html(html);
                        } else {
                            alert(response.msg);
                        }
                    }
                })
                $.ajax({
                    type: "get",
                    url: "/question/host",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        console.log(response);
                        if (response.code == 1) {
                            var question = response.data.questions;
                            var html = "";
                            for (var i = 0; i < question.length; i++) {
                                htmlDiv = "<a href='question.html?quesionId=1' class='list-group-item'>" +
                                    "<h3 class='list-group-item-heading'>" + question[i].title + "</h3>" +
                                    "<table class='table table-condensed'>" +
                                    "<tbody>" +
                                    "<tr>" +
                                    "<td><span class='glyphicon glyphicon-user'></span><span>" + question[i].author.nickname +
                                    "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-time'></span><span>" + question[i].createTime + "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-eye-open'></span><span>" + question[i].clickNum + "</span></td>" +
                                    "<td><span class='glyphicon glyphicon-comment'></span><span>" + question[i].answerNum + "</span></td>" +
                                    "</tr>" +
                                    "</tbody>" +
                                    "</table>" +
                                    "<p class='list-group-item-text'>" + question[i].description + "</p>" +
                                    "</a>";
                                html += htmlDiv;
                            }
                            $("#question-hot").html(html);
                        } else {
                            alert(response.msg);
                        }
                    }
                })
                $.ajax({
                    type: "get",
                    url: "/tweet",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        console.log(response);
                        if (response.code == 1) {
                            var tweet = response.data.tweets;
                            //var avatar = tweet.author.avatar;
                            html = "";
                            for (var i = 0; i < tweet.length; i++) {
                                htmlDiv = "<div class='list-group-item'>" +
                                    "<div class='row'>" +
                                    "<div class='col-xs-2 col-sm-2 col-md-2 col-lg-2'>" +
                                    "<a href='https://my.oschina.net/u/3417788'>" +
                                    "<img src='"+ tweet[i].author.avatar +"' alt='' srcset='' class='img-circle'>" +
                                    "<span>"+ tweet[i].author.nickname +"</span>" +
                                    "</a>" +
                                    "</div>" +
                                    "<div class='col-xs-10 col-sm-10 col-md-10 col-lg-10'>" +
                                    "<p>"+ tweet[i].content +"​</p>" +
                                    "</div>" +
                                    "</div>" +
                                    "</div>";
                                html += htmlDiv;
                            }
                            $("#tweetsList").html(html);
                        } else {
                            alert(response.msg);
                        }
                    }
                })
                $.ajax({
                    type: "get",
                    url: "/activity/latest",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        console.log(response);
                        if (response.code == 1) {
                            var activity = response.data.activities;
                            var html="";
                            for (var i = 0; i < activity.length; i++) {
                                htmlDiv = " <a href='#' class='list-group-item'>" +
                                    "<h4 class='list-group-item-heading'>"+ activity[i].description+"</h4>" +
                                    "<div>" +
                                    "<span>"+ activity[i].activityStartTime +"</span>" +
                                    "<span>"+ activity[i].locale+"</span>" +
                                    "</div>" +
                                    "</a>";
                                html += htmlDiv;
                            }
                            $("#activityList").html(html);
                        } else {
                            alert(response.msg);
                        }
                    }
                })
            })
        </script>
    </body>
</html>